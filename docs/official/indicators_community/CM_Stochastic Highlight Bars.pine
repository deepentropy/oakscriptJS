//Created by ChrisMoody on October 23, 2014 by user request - belgusinc//Changes Barcolor when Stochastic is Overbought Oversold.//Necessary for Highlight Bars//Only Necessary if you want you want Stochastic Crosesstudy(title="CM_Stochastic_Highlight Bars", shorttitle="CM_Stoch_HighlightBars", overlay=true)len = input(14, minval=1, title="Length for Stochastic") smoothK = input(3, minval=1, title="SmoothK for Stochastic")smoothD = input(3, minval=1, title="SmoothD for Stochastic")upLine = input(80, minval=50, maxval=90, title="Upper Line Value?")lowLine = input(20, minval=10, maxval=50, title="Lower Line Value?")//Not Necessary, In Inputs Tab, capability to turn On/Off Highlight Bars, and Both Crosses//These are all checkboxes in inputs tab....Show Barcolor Highlights, Show Background Hghlight, Plot B and S for Buy Sell sbc = input(true, title="Show Price Bar highlight When Stoch is Above/Below High/Low Lines?")sbh = input(false, title="Show Background highlight When Stoch is Above/Below High/Low Lines?")sch = input(false, title="Show Back Ground Highlights When Stoch Cross - Strict Criteria - K Greater/LesThan High/Low Line - Crosses D ?")sl = input(true, title="Show 'B' and 'S' Letters When Stoch Crosses High/Low Line & D?")sac = input(false, title="Show Back Ground Highlights When Stoch Cross - Any Cross?")sacl = input(false, title="Show 'B' and 'S' Letters When Stoch Crosses - Any Cross?")//Necessary for Highlight Bars//Stoch formulak = sma(stoch(close, high, low, len), smoothK)d = sma(k, smoothD)//Necessary for Highlight Bars//aboveline = OverBought, belowline = Oversold DefinitionsaboveLine = k > upLine ? 1 : 0belowLine = k < lowLine ? 1 : 0//Only Necessary if you want you want Stochastic Croses//Definition for Cross when Above High-Low linescrossUp = (k[1] < d[1] and k[1] < lowLine[1]) and (k > d)  ? 1 : 0crossDn = (k[1] > d[1] and k[1] > upLine[1]) and (k < d) ? 1 : 0//Only Necessary if you want you want Stochastic Croses//Definition for Cross that doesn't have to be above or below High and Low line.crossUpAll = (k[1] < d[1] and k > d) ? 1 : 0crossDownAll = (k[1] > d[1] and k < d) ? 1 : 0//Only Necessary if you want background Highlighting also - Take out the sbh/sbc and part//BackGround Highlights based on Above/Below Lines, Strict Cross Up/Down//BackGroound Color Plotsbgcolor(sbh and aboveLine ? red : na, transp=70)bgcolor(sbh and belowLine ? lime : na, transp=70)bgcolor(sch and crossUp ? lime : na, transp=40)bgcolor(sch and crossDn ? red : na, transp=40)//Only Necessary if you want background Highlighting also//plots bgcolor Cross with no filterbgcolor(sac and crossUpAll ? lime : na, transp=40)bgcolor(sac and crossDownAll ? red : na, transp=40)//Necessary for Highlight Bars//Highlight Bar DefinitionsoverBought() => sbc and aboveLine overSold() => sbc and belowLine //Necessary for Highlight Bars//Highlight Bar Plot Statement based on Above Definitionsbarcolor(overBought() ? orange : overSold() ? fuchsia : na)//Not Necessary if you just want Highlight Bars  - Extra Feature//These are just the Letters B and Sell Based on Crossesplotchar(sl and crossUp ? crossUp : na, title="Buy Signal Strict Criteria", char='B', location=location.belowbar, color=lime, transp=0, offset=0)plotchar(sl and crossDn ? crossDn : na, title="Sell Signal Strict Criteria", char='S', location=location.abovebar, color=red, transp=0, offset=0)plotchar(sacl and crossUpAll ? crossUpAll : na, title="Buy Signal Any Cross Up", char='B', location=location.belowbar, color=lime, transp=0, offset=0)plotchar(sacl and crossDownAll ? crossDownAll : na, title="Sell Signal Any Cross Down", char='S', location=location.abovebar, color=red, transp=0, offset=0)