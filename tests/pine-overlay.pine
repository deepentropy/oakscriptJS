//@version=6
indicator(title="OakScript Reference - Overlay Indicators", shorttitle="OakRef-Overlay", overlay=true)

// === INPUTS ===
length = input. int(14, "Length", minval=1)
source = input.source(close, "Source")

// === MOVING AVERAGES ===
sma_val = ta.sma(source, length)
ema_val = ta.ema(source, length)
wma_val = ta.wma(source, length)
vwma_val = ta.vwma(source, length)
rma_val = ta. rma(source, length)

// Double EMA (DEMA)
ema1 = ta.ema(source, length)
ema2 = ta.ema(ema1, length)
dema_val = 2 * ema1 - ema2

// Triple EMA (TEMA)
ema1_t = ta. ema(source, length)
ema2_t = ta.ema(ema1_t, length)
ema3_t = ta. ema(ema2_t, length)
tema_val = 3 * (ema1_t - ema2_t) + ema3_t

// Hull Moving Average (HMA)
hma_half = ta.wma(source, length / 2)
hma_full = ta.wma(source, length)
hma_val = ta.wma(2 * hma_half - hma_full, math.round(math.sqrt(length)))

// Linear Regression (LSMA / LINREG)
lsma_val = ta.linreg(source, length, 0)

// McGinley Dynamic
mg = 0.0
mg := na(mg[1]) ? ta. ema(source, length) : mg[1] + (source - mg[1]) / (length * math.pow(source / mg[1], 4))

// Arnaud Legoux Moving Average (ALMA)
alma_val = ta.alma(source, length, 0.85, 6)

// Kaufman Adaptive Moving Average (KAMA)
//kama_val = ta.kama(source, length)

// SuperTrend
atr_val = ta.atr(length)
supertrend_factor = 3.0
hl2_val = hl2
upper_band = hl2_val + supertrend_factor * atr_val
lower_band = hl2_val - supertrend_factor * atr_val
var float supertrend = na
var int direction = 1
supertrend := direction == 1 ? math.max(lower_band, nz(supertrend[1], lower_band)) : math.min(upper_band, nz(supertrend[1], upper_band))
direction := close > supertrend ?  1 : close < supertrend ?  -1 : direction

// Bollinger Bands
bb_basis = ta.sma(source, length)
bb_dev = 2.0 * ta. stdev(source, length)
bb_upper = bb_basis + bb_dev
bb_lower = bb_basis - bb_dev

// Keltner Channel
kc_basis = ta. ema(source, length)
kc_range = ta.atr(length)
kc_upper = kc_basis + 2.0 * kc_range
kc_lower = kc_basis - 2.0 * kc_range

// Donchian Channel
dc_upper = ta.highest(high, length)
dc_lower = ta.lowest(low, length)
dc_mid = (dc_upper + dc_lower) / 2

// Parabolic SAR
sar_val = ta.sar(0.02, 0.02, 0.2)

// Pivot Points (Simple)
pivot = (high[1] + low[1] + close[1]) / 3
r1 = 2 * pivot - low[1]
s1 = 2 * pivot - high[1]
r2 = pivot + (high[1] - low[1])
s2 = pivot - (high[1] - low[1])

// Ichimoku Cloud
tenkan_len = 9
kijun_len = 26
senkou_span_b_len = 52
tenkan = (ta.highest(high, tenkan_len) + ta.lowest(low, tenkan_len)) / 2
kijun = (ta.highest(high, kijun_len) + ta.lowest(low, kijun_len)) / 2
senkou_a = (tenkan + kijun) / 2
senkou_b = (ta.highest(high, senkou_span_b_len) + ta.lowest(low, senkou_span_b_len)) / 2

// === PLOTS ===
// Moving Averages
plot(sma_val, "SMA", color=color.blue, linewidth=1)
plot(ema_val, "EMA", color=color. red, linewidth=1)
plot(wma_val, "WMA", color=color.orange, linewidth=1)
plot(vwma_val, "VWMA", color=color. purple, linewidth=1)
plot(rma_val, "RMA", color=color.teal, linewidth=1)
plot(dema_val, "DEMA", color=color.lime, linewidth=1)
plot(tema_val, "TEMA", color=color.fuchsia, linewidth=1)
plot(hma_val, "HMA", color=color.aqua, linewidth=1)
plot(lsma_val, "LSMA", color=color.yellow, linewidth=1)
plot(mg, "McGinley", color=color. white, linewidth=2)
plot(alma_val, "ALMA", color=color.olive, linewidth=1)
//plot(kama_val, "KAMA", color=color.maroon, linewidth=1)

// SuperTrend
plot(supertrend, "SuperTrend", color=direction == 1 ?  color.green : color.red, linewidth=2)

// Bollinger Bands
plot(bb_basis, "BB Basis", color=color.gray, linewidth=1)
plot(bb_upper, "BB Upper", color=color.blue, linewidth=1)
plot(bb_lower, "BB Lower", color=color.blue, linewidth=1)

// Keltner Channel
plot(kc_basis, "KC Basis", color=color.gray, linewidth=1, display=display.none)
plot(kc_upper, "KC Upper", color=color.orange, linewidth=1, display=display. none)
plot(kc_lower, "KC Lower", color=color.orange, linewidth=1, display=display.none)

// Donchian Channel
plot(dc_upper, "DC Upper", color=color.green, linewidth=1, display=display. none)
plot(dc_lower, "DC Lower", color=color.green, linewidth=1, display=display.none)
plot(dc_mid, "DC Mid", color=color. green, linewidth=1, display=display.none)

// Parabolic SAR
plot(sar_val, "SAR", color=color.yellow, style=plot.style_cross, display=display.none)

// Pivot Points
plot(pivot, "Pivot", color=color.gray, linewidth=1, display=display. none)
plot(r1, "R1", color=color.red, linewidth=1, display=display.none)
plot(s1, "S1", color=color.green, linewidth=1, display=display. none)

// Ichimoku
plot(tenkan, "Tenkan", color=color.blue, linewidth=1, display=display. none)
plot(kijun, "Kijun", color=color.red, linewidth=1, display=display. none)
plot(senkou_a, "Senkou A", color=color. green, linewidth=1, display=display.none)
plot(senkou_b, "Senkou B", color=color.red, linewidth=1, display=display. none)